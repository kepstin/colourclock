<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Colour Clock</title>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
		<style>
body {
	background: #000;
	color: #fff;
	font-family: "Open Sans", Helvetica, Arial, sans-serif;
	transition: background-color 0.9s, color 0.9s;
	text-align: center;
}
h1 {
	margin: 0 0 0.25em 0;
}
header {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	padding: 0.5em;
	min-width: 33%;
}
a:link, a:visited {
	color: inherit;
}
a:hover {
	color: #fff;
}
#aboot {
	padding: 0.5em;
	max-width: 40em;
	margin: 0 auto;
}
#clock {
	font-size: 8em;
	font-weight: 300;
}
#colour {
	font-size: 2em;
	font-weight: 300;
}
footer {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	padding: 0.5em;
}
		</style>
		<script src="concat.js"></script>
<!--
Brightness: L=80 to L=20
Saturation: Radius=50 to Radius=30
Foreground: Add 20 to L, invert saturation
-->
		<script>
var zone=null;
function setupZone() {
	if (document.location.hash.length > 1) {
		var zoneName = document.location.hash.substring(1);
		var zoneWarningT = document.getElementById("zoneWarning");
		if (!!moment.tz.zone(zoneName)) {
			zone = zoneName;
			zoneWarningT.style.display = "none";
		} else {
			var zoneNameT = document.getElementById("zoneName");
			zoneNameT.textContent = zoneName;
			zoneWarningT.style.display = "block";
			zone = null;
		}
	} else {
		zone = null;
	}
}
function doClockStuff() {
	var date = new moment();
	if (!!zone) {
		date.tz(zone);
	}

	var hours = date.hour();
	var minutes = date.minute();
	var seconds = date.second();

	var hue = (((hours - 3) * 60 + minutes) * 60 + seconds) / 86400 * 2 * Math.PI;
	var bg_radius = 40 + (Math.cos(seconds / 30 * Math.PI) * 10);
	var fg_radius = 40 - (Math.cos(seconds / 30 * Math.PI) * 10);
	var a = -Math.sin(hue);
	var bg_a = a * bg_radius;
	var fg_a = a * fg_radius;
	var b = Math.cos(hue);
	var bg_b = b * bg_radius;
	var fg_b = b * fg_radius;
	var bg_l = 60 + (Math.cos((minutes * 60 + seconds) / 60 / 30 * Math.PI) * 20);
	var fg_l = bg_l + 20;

	var bgcolour = hexrgb($c.Lab(bg_l, bg_a, bg_b).sRGB8());
	var fgcolour = hexrgb($c.Lab(fg_l, fg_a, fg_b).sRGB8());

	document.body.style.backgroundColor = bgcolour;
	document.body.style.color = fgcolour;

	var clockDisplay = document.getElementById("clock");
	clockDisplay.textContent = date.format("HH:mm:ss");

	var colourDisplay = document.getElementById("colour");
	colourDisplay.textContent = fgcolour + " on " + bgcolour;
}
function hexrgb(rgb) {
	function hex(x) {
		x = Math.round(Math.min(Math.max(x, 0), 255));
		return ("0" + x.toString(16)).slice(-2);
	}
	return "#" + hex(rgb.r) + hex(rgb.g) + hex(rgb.b);
}
var abootVisible = false;
function toggleAboot() {
	var aboot = document.getElementById('aboot');
	if (abootVisible) {
		aboot.style.display="none";
		abootVisible = false;
	} else {
		aboot.style.display="block";
		abootVisible = true;
	}
}
var clockVisible = true;
function toggleClock() {
	var clock = document.getElementById('clock');
	if (clockVisible) {
		clock.style.visibility = "hidden";
		clockVisible = false;
	} else {
		clock.style.visibility = "visible";
		clockVisible = true;
	}
}
		</script>
	</head>
	<body>
		<noscript>
			<h1>Colour Clock</h1>
			<p>In order to see the awesomeness of the colour clock, you’re going to have to use a web browser with Javascript enabled.</p>
		</noscript>
		<header>
			<h1 id="clock">&nbsp;</h1>
			<p><span id="colour"></span></p>
			<p><a href="#" onclick="toggleAboot(); return false;">about</a> | <a href="#" onclick="toggleClock(); return false;">clock</a></p>
		</header>
		<section id="zoneWarning" style="display:none">
			<p>I don't know how to tell time in the time zone "<span id="zoneName"></span>", you're getting local time instead.</p>
		</section>
		<section id="aboot" style="display:none">
			<p>It's a work of art. Or, if you rather, a clock.<p>
			<p>It's pretty simple. The time of day sets the colour, while the minute sets the lightness (bright on the hour, becoming dim) and the second sets the saturation (saturated on the minute, becoming dull).</p>
			<p>If you get really good, you can probably tell the approximate time from the colour alone. Good luck!</p>
			<p>You can set a time zone by adding a #TimezoneName to the URL. Try <a href="#UTC">#UTC</a> or <a href="#Canada/Eastern">#Canada/Eastern</a></p>
		</section>
		<footer>Copyright ⓒ 2015 Calvin Walton, released under the terms of the <a href="copying.txt">WTFPL-2</a> license – Inspired by <a href="http://whatcolourisit.scn9a.org/">What colour is it?</a> – Fork it on <a href="https://github.com/kepstin/colourclock">Github</a></footer>
		<script>
			setupZone();
			window.onhashchange = setupZone;
			doClockStuff();
			window.setInterval(doClockStuff, 1000);
		</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-26728447-3', 'auto');
  ga('send', 'pageview');

</script>
	</body>
</html>
